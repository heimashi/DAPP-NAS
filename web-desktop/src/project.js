require=function n(r,o,c){function h(e,t){if(!o[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var a=o[e]={exports:{}};r[e][0].call(a.exports,function(t){return h(r[e][1][t]||t)},a,a.exports,n,r,o,c)}return o[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)h(c[t]);return h}({AnimRect:[function(t,e,i){"use strict";cc._RF.push(e,"7289d2zvA9B/7G2zffSJg3X","AnimRect"),cc.Class({extends:cc.Component,properties:{rectWidth:0,lineWidth:0,successSpeed:0,isPlayingSuccess:!1,animRect:{default:null,type:cc.Node},bigParticle:{default:null,type:cc.Node},smallParticle:{default:null,type:cc.Node}},onLoad:function(){this.g=this.getComponent(cc.Graphics),this.bigP=this.bigParticle.getComponent(cc.ParticleSystem),this.smallP=this.smallParticle.getComponent(cc.ParticleSystem)},playSuccessAnim:function(t,e,i){if(this.rectWidth=t,this.lastRect=this.rectWidth,this.isPlayingSuccess=!0,e){if(!this.bigP.startRadius)return;this.bigP.startRadius=t/2,this.bigP.startColor=i,this.bigP.endColor=i,this.bigP.resetSystem()}else{if(!this.smallP.startRadius)return;this.smallP.startRadius=t/2,this.smallP.endRadius=t/2+100,this.smallP.startColor=i,this.smallP.endColor=i,this.smallP.resetSystem()}},stopSuccessAnim:function(){this.isPlayingSuccess=!1,this.rectWidth=this.lastRect,this.big.stopSystem()},update:function(t){}}),cc._RF.pop()},{}],CountDown:[function(t,e,i){"use strict";cc._RF.push(e,"3aca5JYCQtJQaaCeIuMJeWd","CountDown");var s=t("GameManager");cc.Class({extends:cc.Component,properties:{gameRoot:{default:null,type:cc.Node},stepAudio:{default:null,url:cc.AudioClip},readyAudio:{default:null,url:cc.AudioClip}},onStartAnimEnd:function(){console.log("+++++++"),void 0===this.gameManager&&(this.gameManager=this.gameRoot.getComponent(s)),this.gameManager.startPlayGame()},playStepAudio:function(){cc.audioEngine.playEffect(this.stepAudio,!1)},playReadygo:function(){cc.audioEngine.playEffect(this.readyAudio,!1)}}),cc._RF.pop()},{GameManager:"GameManager"}],GameManager:[function(e,t,i){"use strict";cc._RF.push(t,"d9f7a9UZ2RPPqgpflaW+i/o","GameManager");var s=e("PlayerRect"),a=e("TargetRect"),n=e("AnimRect"),r=e("LanguageData");cc.Class({extends:cc.Component,properties:{isPlaying:!0,canvas:cc.Node,isRotateState:!1,spriteHolder:cc.SpriteFrame,defaultRotateSpeed:0,maxRotateSpeed:0,maxScaleSpeed:0,rotateSpeed:0,scaleSpeed:0,score:0,sharedCount:0,isGuideMode:0,guideLayout:cc.Node,playerRect:{default:null,type:cc.Node},scoreFXPrefab:{default:null,type:cc.Prefab},scoreFXPrefab2:{default:null,type:cc.Prefab},successAudio:{default:[],url:cc.AudioClip},failAudio:{default:null,url:cc.AudioClip},startAudio:{default:null,url:cc.AudioClip},changeStateAudio:{default:null,url:cc.AudioClip},animRect:{default:null,type:n},targetRectList:{default:[],type:cc.Node},countDown:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},maxScoreLabel:{default:null,type:cc.Label},gameOverLabel:{default:null,type:cc.Node},menuRoot:{default:null,type:cc.Node},tipLabel:{default:null,type:cc.Node},audioList:[],littleStar:[]},startGame:function(t){this.isPlaying=!1,this.gameOverLabel.active=!1,this.playerRect.active=!1,this.targetRectList[0].active=!1,this.maxScoreLabel.node.active=!1,this.tipLabel.active=!1,this.resetGame(!1),this.countDown.active=!0,this.countDownAnim.play()},startPlayGame:function(){this.playerRect.active=!0,this.targetRectList[0].active=!0,this.player.reset(),this.target0.reset(),this.countDown.active=!1,this.tipLabel.active=!0,this.scoreLabel.node.active=!0,this.canvas.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.hideTipLayout.bind(this)))),this.player.isPlaying=!0,this.isPlaying=!0},resetGame:function(t){this.audioStep=0,t?this.sharedCount++:(this.score=0,this.sharedCount=0),this.isRotateState=!1,this.player.playerState=0,this.target0.isRectState=!0,this.player.speed=this.scaleSpeed,this.rotateSpeed=this.defaultRotateSpeed,this.getNextSong(),this.playerRect.rotation=0,this.scoreLabel.string="Score: "+this.score,this.targetRectList[0].rotation=0},endGame:function(){if(this.gameOverLabel.active=!0,this.gameOverAnim.play("game_over"),void 0===this.menuManager){var t=e("MenuManager");this.menuManager=this.menuRoot.getComponent(t)}this.menuManager.endGame()},hideTipLayout:function(){this.tipLabel.active=!1},handleTouch:function(){var i=this;i.canvas.on(cc.Node.EventType.TOUCH_START,function(t){console.log("click");var e=t.getTouches()[0].getLocation();i.touchPos=i.node.parent.convertToNodeSpaceAR(e),i.isInCorrectState()},i.node)},isInCorrectState:function(){this.isPlaying&&(this.isRotateState?this.rotateHandler():this.scaleHandler())},handleSuccess:function(t){this.player.isPlaying=!1,this.success=!0,this.score+=t,this.scoreLabel.string="Score: "+this.score;var e=cc.sys.localStorage.getItem("max_score");if((!e||this.score>e)&&cc.sys.localStorage.setItem("max_score",this.score),this.scoreAnim.play(),this.player.speed=Math.min(this.scaleSpeed+3*this.score,this.maxScaleSpeed),this.rotateSpeed=Math.min(this.defaultRotateSpeed+this.score/3,this.maxRotateSpeed),1==t){var i=this.spawnScoreFX();this.scheduleOnce(function(){this.despawnScoreFX(i)},1),this.node.addChild(i),i.setPosition(this.touchPos.x,this.touchPos.y+900);var s=i.getComponent(cc.Animation),a=i.getComponent(cc.ParticleSystem);s.play(),a.resetSystem()}else{i=this.spawnScoreFX2();this.scheduleOnce(function(){this.despawnScoreFX2(i)},1),this.node.addChild(i),i.setPosition(this.touchPos.x,this.touchPos.y+1e3);s=i.getComponent(cc.Animation),a=i.getComponent(cc.ParticleSystem);s.play(),a.resetSystem()}this.playSuccessAudio(),this.animRect.playSuccessAnim(this.target0.rectWidth,this.player.isSmallToBig,this.target0.rectColor),this.playerNextLevel()},playSuccessAudio:function(){void 0===this.currentAudio&&this.getNextSong();var t=this.currentAudio.length;this.audioStep>=t&&this.getNextSong();var e=this.currentAudio[this.audioStep++];cc.audioEngine.playEffect(this.successAudio[e-1],!1)},getNextSong:function(){var t=this.audioList.length,e=Math.floor(Math.random()*t);t<=e&&(e=t-1),this.currentAudio=this.audioList[e],this.audioStep=0},rotateHandler:function(){var t=this.targetRectList[0].rotation-7,e=this.targetRectList[0].rotation+7;this.playerRect.rotation>t&&this.playerRect.rotation<e?this.handleSuccess(this.getRotatePoint(this.player.lineWidth,this.playerRect.rotation)):(this.player.isPlaying=!0,console.log(this.playerRect.rotation+" : "+this.targetRectList[0].rotation),this.handleFailed())},getRotatePoint:function(t,e){return Math.abs(t-e)<3?2:1},getScalePoint:function(t,e,i){var s=(t+e)/2,a=this.player.lineWidth/2+2;return s-a<i&&i<s+a?2:1},scaleHandler:function(){var t=void 0,e=void 0;this.player&&(this.player.isSmallToBig?(t=this.target0.rectWidth-this.target0.lineWidth+this.player.lineWidth,e=this.target0.rectWidth+this.target0.lineWidth-this.player.lineWidth):(e=this.target0.rectWidth-this.target0.lineWidth+this.player.lineWidth,t=this.target0.rectWidth+this.target0.lineWidth-this.player.lineWidth),console.log("s:"+t+" e:"+e+"  "+this.player.rectWidth),this.player.isSmallToBig&&e>=this.player.rectWidth&&this.player.rectWidth>=t?this.handleSuccess(this.getScalePoint(t,e,this.player.rectWidth)):!this.player.isSmallToBig&&e<=this.player.rectWidth&&this.player.rectWidth<=t?this.handleSuccess(this.getScalePoint(t,e,this.player.rectWidth)):this.handleFailed())},handleFailed:function(){this.player.isSmallToBig=!0,this.player.speed=3e3,this.success=!1;var t=this.score+"";cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.getOpenDataContext&&wx.getOpenDataContext().postMessage({method:"addScore",value:t}));this.isPlaying=!1,cc.audioEngine.playEffect(this.failAudio,!1),this.endGame()},playerNextLevel:function(){if(this.guideLayout.active=!1,this.isGuideMode++,0===this.player.playerState&&!this.target0.isMultiStep&&.7<Math.random()){this.isRotateState=!0,this.player.isPlaying=!1;var t=30+50*Math.random();this.targetRectList[0].rotation+=t}else this.target0.isMultiStep?this.player.isSmallToBig=!1:(this.changeRoundState(),this.player.rectWidth>this.target0.maxWidth-this.target0.minSepWidth?(this.player.isSmallToBig=!1,this.nextWidth=this.player.rectWidth-this.target0.minSepWidth):(this.player.isSmallToBig=!0,this.nextWidth=this.player.rectWidth+this.target0.minSepWidth),this.isRotateState=!1,this.targetRectList[0].rotation=this.playerRect.rotation),this.target0.getNextRect(this.player.isSmallToBig,this.nextWidth),this.canvas.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(this.startPlayer.bind(this))))},changeRoundState:function(){if(.7<Math.random()){this.target0.isRectState=this.player.changePlayerState()}},startPlayer:function(){this.player.playNextLevel()},onLoad:function(){var t=cc.sys.language;"zh"!==t&&(t="en"),r.init(t),this.initAudioList(),this.player=this.playerRect.getComponent(s),this.target0=this.targetRectList[0].getComponent(a),this.gameOverAnim=this.gameOverLabel.getComponent(cc.Animation),this.scoreAnim=this.scoreLabel.getComponent(cc.Animation),this.countDownAnim=this.countDown.getComponent(cc.Animation),this.scorePool=new cc.NodePool("ScoreFX"),this.scorePool2=new cc.NodePool("ScoreFX2"),this.handleTouch(),this.handleWechat()},handleWechat:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.login({success:function(){wx.getUserInfo({success:function(t){var e=t.userInfo;console.log(e.nickName)}})}}),wx.showShareMenu({success:function(t){console.log(t)},fail:function(t){console.log(t)}}),wx.onShareAppMessage(function(){return{title:"魔性的音乐套圈游戏，快来玩！",imageUrl:"res/raw-assets/res/textures/share_img.jpg"}}),wx.createGameClubButton&&wx.createGameClubButton({icon:"white",style:{left:10,top:20,width:30,height:30}}))},initAudioList:function(){this.audioList.push([1,1,5,5,6,6,5,4,4,3,3,2,2,1,5,5,4,4,3,3,2,5,5,4,4,3,3,2]);this.audioList.push([5,4,3,3,4,3,3,4,3,4,3,2,1,1,3,5,6,6,6,5,2,2,4,3,1,3,5,6,6,6,5,2,2,4,3,4,3,2,1,2,3,6,6,1,1,7,1]);this.audioList.push([5,3,5,3,5,3,1,2,4,3,2,5,5,3,5,3,5,3,1,2,4,3,2,1,2,2,4,4,3,2,5,2,4,3,2,5,5,3,5,3,5,3,1,2,4,3,2,1]);this.audioList.push([3,3,4,5,5,4,3,2,1,1,2,3,3,2,2]);this.audioList.push([1,1,2,3,3,4,5,6,5,3,5,4,3,2,4,3,2,1]);this.audioList.push([1,4,4,4,1,5,3,4,1,4,7,7,6,5,4,3,4,5,1,4,4,4,1,5,3,4,1,4,6,8,6,4,2,5,6,4,7,6,5,2,2,3,4,5,7,6,5,2,2,3,4,5,4])},spawnScoreFX:function(){return console.log("aaa"+this.scorePool.size()),0<this.scorePool.size()?this.scorePool.get():cc.instantiate(this.scoreFXPrefab)},despawnScoreFX:function(t){this.scorePool.put(t)},spawnScoreFX2:function(){return 0<this.scorePool2.size()?this.scorePool2.get():cc.instantiate(this.scoreFXPrefab2)},despawnScoreFX2:function(t){this.scorePool2.put(t)},stopGame:function(){this.player.isPlaying=!1,this.guideLayout.x=-this.player.rectWidth/2-110,this.guideLayout.y=-30,this.guideLayout.active=!0},reStartGame:function(){},update:function(t){if(this.isPlaying)if(this.isRotateState)this.playerRect.rotation+=this.rotateSpeed*t,this.playerRect.rotation>this.targetRectList[0].rotation+10&&(this.player.isPlaying=!0,this.handleFailed());else{if(!this.player)return;this.isGuideMode<2&&(this.player.isSmallToBig&&this.target0.rectWidth<this.player.rectWidth?this.stopGame():!this.player.isSmallToBig&&this.target0.rectWidth>this.player.rectWidth&&this.stopGame()),this.player.isSmallToBig&&this.target0.rectWidth<this.player.rectWidth-this.target0.minSepWidth?this.handleFailed():!this.player.isSmallToBig&&this.target0.rectWidth>this.player.rectWidth+this.target0.minSepWidth&&this.handleFailed()}}}),cc._RF.pop()},{AnimRect:"AnimRect",LanguageData:"LanguageData",MenuManager:"MenuManager",PlayerRect:"PlayerRect",TargetRect:"TargetRect"}],LanguageData:[function(t,e,i){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var s=t("polyglot.min"),a=null;function n(t){return window.i18n.languages[t]}function r(t){t&&(a?a.replace(t):a=new s({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=n(t)||{};window.i18n.curLang=t,r(e),this.inst=a}},t:function(t,e){if(a)return a.t(t,e)},inst:a,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],i=0;i<t.length;++i){var s=t[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,s)}for(var a=0;a<e.length;++a){e[a].updateLabel()}for(var n=[],r=0;r<t.length;++r){var o=t[r].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(n,o)}for(var c=0;c<n.length;++c){n[c].updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabel:[function(t,e,i){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var s=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){s.inst||s.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?s.t(this.dataID)&&(this.label.string=s.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,i){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var s=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:s}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MenuManager:[function(t,e,i){"use strict";cc._RF.push(e,"851b3sY96tI37OKl5Ss4MDP","MenuManager");var s=t("GameManager"),a=t("LanguageData");cc.Class({extends:cc.Component,properties:{gameRoot:{default:null,type:cc.Node},playButton:{default:null,type:cc.Node},shareButton:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},guideLayout:{default:null,type:cc.Node},playLabel:{default:null,type:cc.Label},isShared:!1},onLoad:function(){var t=cc.sys.language;"zh"!==t&&(t="en"),a.init(t)},shareBtnClick:function(){var t=this;cc.sys.platform===cc.sys.WECHAT_GAME?wx.shareAppMessage({title:"魔性的音乐套圈游戏，快来玩！",imageUrl:"res/raw-assets/res/textures/share_img.jpg",success:function(){console.log("++++++---success"),t.isShared=!0},complete:function(){console.log("++++++---complete")}}):cc.sys.platform===cc.sys.ANDROID&&t.showAdsByJavaReflect()},showAdsByJavaReflect:function(){jsb.reflection.callStaticMethod("com/wefun/game/mr/JsBridge","showAds","()V")},adsEndCallback:function(){this.isShared=!0,this.playButtonClick()},playButtonClick:function(){this.guideLayout.active=!1,this.rankButton.active=!1,this.shareButton.active=!1,void 0===this.gameManager&&(this.gameManager=this.gameRoot.getComponent(s)),this.gameManager.startGame(!1),this.playButton.active=!1,this.isShared=!1},rankButtonClick:function(){cc.director.loadScene("rank")},guideClick:function(){},endGame:function(){this.playLabel.node.getComponent("LocalizedLabel").dataID=a.t("label_text.restart"),void 0===this.gameManager&&(this.gameManager=this.gameRoot.getComponent(s)),console.log("SHARE_COUNT:"+this.gameManager.sharedCount),this.shareButton.active=!0,this.rankButton.active=!0,this.playButton.active=!0}}),cc._RF.pop()},{GameManager:"GameManager",LanguageData:"LanguageData"}],PlayerRect:[function(t,e,i){"use strict";cc._RF.push(e,"062be1zpjlK9rHdvrWf6Aou","PlayerRect"),cc.Class({extends:cc.Component,properties:{rectWidth:0,isSmallToBig:!0,speed:0,lineWidth:0,isPlaying:!1,playerState:0,roundRadius:0,playerRect:{default:null,type:cc.Node}},onLoad:function(){this.playerColor=cc.hexToColor("#FFFFFF"),this.screenSize=cc.view.getVisibleSize(),this.minWidth=.2*this.screenSize.width,this.maxWidth=.6*this.screenSize.width,this.g=this.getComponent(cc.Graphics),this.drawFirstRect()},reset:function(){this.drawFirstRect()},drawFirstRect:function(){var t=this.g;t.clear(),t.lineWidth=this.lineWidth,t.strokeColor=this.playerColor;var e=this.minWidth;this.rectWidth=e,t.rect(-e/2,-e/2,e,e),t.stroke()},playNextLevel:function(){this.isPlaying=!0},drawRoundRectFrame:function(t){var e=this.g;if(e.clear(),e.lineWidth=this.lineWidth,e.strokeColor=this.playerColor,0===this.playerState){this.roundRadius=0;var i=this.speed*t*(this.isSmallToBig?1:-1);this.rectWidth+=i}else if(1===this.playerState)if(this.roundRadius<this.rectWidth/2){var s=150*this.rectWidth/this.minWidth;this.roundRadius+=s*t}else{this.playerState=2,this.roundRadius=this.rectWidth/2;var a=this.speed*t*(this.isSmallToBig?1:-1);this.rectWidth+=a}else if(2===this.playerState){var n=this.speed*t*(this.isSmallToBig?1:-1);this.rectWidth+=n,this.roundRadius=this.rectWidth/2}else if(3===this.playerState)if(0<this.roundRadius){s=150*this.rectWidth/this.minWidth;this.roundRadius-=s*t}else{this.playerState=0,this.roundRadius=0;var r=this.speed*t*(this.isSmallToBig?1:-1);this.rectWidth+=r}this.drawRoundRect(e,this.rectWidth),e.stroke()},drawRoundRect:function(t,e){2===this.playerState?t.circle(0,0,this.roundRadius):t.roundRect(-e/2,-e/2,e,e,this.roundRadius)},changePlayerState:function(){return console.log("ch state:"+this.playerState),0===this.playerState?this.playerState=1:2===this.playerState&&(this.playerState=3),0===this.playerState||3===this.playerState},update:function(t){this.isPlaying&&this.drawRoundRectFrame(t)}}),cc._RF.pop()},{}],RankManager:[function(t,e,i){"use strict";cc._RF.push(e,"1c215ncSAtNZJBch1Y12dlF","RankManager"),cc.Class({extends:cc.Component,properties:{rankSprite:cc.Sprite},start:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.getOpenDataContext().postMessage({method:"showFriendRank"}),this._isShow=!1,this.tex=new cc.Texture2D)},updateSubDomainCanvas:function(){this.tex&&(this.tex.initWithElement(sharedCanvas),this.tex.handleLoadedTexture(),console.log(this.rankSprite),this.rankSprite.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&this.updateSubDomainCanvas()},backBtnClick:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{}],SpriteFrameSet:[function(t,e,i){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var s=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=s,cc._RF.pop()},{}],TargetRect:[function(t,e,i){"use strict";cc._RF.push(e,"14240Ibu8ZMza7YywTsYF7v","TargetRect"),cc.Class({extends:cc.Component,properties:{rectColor:null,rectWidth:0,lineWidth:0,maxWidth:0,minWidth:0,minSepWidth:150,isMultiStep:!1,isRectState:!0,roundRadius:0,colorArray:[],widthArray:[],targetRect:{default:null,type:cc.Node}},onLoad:function(){this.colorArray.push(cc.hexToColor("#FF7D08")),this.colorArray.push(cc.hexToColor("#FF3634")),this.colorArray.push(cc.hexToColor("#FFC600")),this.colorArray.push(cc.hexToColor("#0ADDA8")),this.colorArray.push(cc.hexToColor("#9D5BD0")),this.colorArray.push(cc.hexToColor("#629FFF")),this.rectColor=this.colorArray[0],this.screenSize=cc.view.getVisibleSize(),this.minWidth=.18*this.screenSize.width,this.maxWidth=.65*this.screenSize.width,this.g=this.getComponent(cc.Graphics),this.getFirstRect()},reset:function(){this.getFirstRect()},getFirstRect:function(){var t=this.g;t.clear(),t.lineWidth=this.lineWidth,t.strokeColor=this.getCurrentColor(!1);var e=this.maxWidth;this.rectWidth=e,t.rect(-e/2,-e/2,e,e),t.stroke()},getCurrentColor:function(t){if(t){var e=this.colorArray.length,i=Math.floor(Math.random()*e);return e<=i&&(i=e-1),this.rectColor=this.colorArray[i],console.log("i:"+i+" "+this.rectColor),this.rectColor}return this.rectColor},getNextRect:function(t,e){this.isMultiStep?this.generateMultiStepRect(t,e):!t&&e>.7*this.maxWidth&&.02<Math.random()?this.generateMultiStepRect(t,e):this.generateOneStepRect(t,e)},drawRoundRect:function(t,e){this.isRectState?t.roundRect(-e/2,-e/2,e,e,this.roundRadius):t.circle(0,0,this.roundRadius)},generateOneStepRect:function(t,e){var i=this.g;i.clear(),i.lineWidth=this.lineWidth,i.strokeColor=this.getCurrentColor(!0);var s=0;s=t?Math.random()*(this.maxWidth-e)+e:Math.random()*(e-this.minWidth)+this.minWidth,this.rectWidth=s,this.setNewRadius(s),this.drawRoundRect(i,s),i.stroke()},setNewRadius:function(t){this.isRectState?this.roundRadius=0:this.roundRadius=t/2},generateMultiStepRect:function(t,e){if(this.isMultiStep){var i=this.g;i.clear();for(var s=this.widthArray.length,a=void 0,n=0;n<s;n++){var r=this.widthArray.pop();i.strokeColor=this.getCurrentColor(!1),this.setNewRadius(r),this.drawRoundRect(i,r),i.stroke(),n===s-1?this.rectWidth=r:a=r}void 0!==a&&this.widthArray.push(a),s<=1&&(this.isMultiStep=!1)}else{this.isMultiStep=!0;var o=this.g;o.clear(),o.lineWidth=this.lineWidth,o.strokeColor=this.getCurrentColor(!0);var c=e;if(this.rectWidth=c,this.setNewRadius(c),this.drawRoundRect(o,c),o.stroke(),c-=this.minSepWidth,this.widthArray.push(c),o.strokeColor=this.getCurrentColor(!0),this.setNewRadius(c),this.drawRoundRect(o,c),o.stroke(),.5<Math.random())return;c-=this.minSepWidth,this.widthArray.push(c),o.strokeColor=this.getCurrentColor(!0),this.setNewRadius(c),this.drawRoundRect(o,c),o.stroke()}}}),cc._RF.pop()},{}],en:[function(t,e,i){"use strict";cc._RF.push(e,"12ca2KPfHZKxLk7AuYYCuFB","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={label_text:{start:"START",restart:"RESTART",game_over:"GAME\nOVER",tip1:"Tap to start",tip2:"When the two boxes coincide\nClick the screen to get the score.",tip3:"Press the screen when the boxes overlap",tip4:"When two boxes coincide\nClick screen to get score.",highest_score:"Highest Score: ",forward:"FORWARD",back:"BACK",watch_ad:"SAVE ME BY AD",ranking_list:"Ranking List"}},cc._RF.pop()},{}],"polyglot.min":[function(t,e,i){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var s,a,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};s=void 0,a=function(e){function t(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||i}function a(t,e,i){var s,a,n,r,o,c,h;return null!=i&&t?(n=(a=t.split(l))[(r=e,o=i,u[(c=r,h=function(t){var e,i,s,a={};for(e in t)if(t.hasOwnProperty(e))for(s in i=t[e])a[i[s]]=e;return a}(d),h[c]||h.en)](o))]||a[0],s=n.replace(/^\s+|\s+$/g,"")):s=t,s}function i(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}t.VERSION="0.4.3",t.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},t.prototype.extend=function(t,e){var i;for(var s in t)t.hasOwnProperty(s)&&(i=t[s],e&&(s=e+"."+s),"object"==(void 0===i?"undefined":n(i))?this.extend(i,s):this.phrases[s]=i)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(t){this.clear(),this.extend(t)},t.prototype.t=function(t,e){var i,s;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?i=this.phrases[t]:"string"==typeof e._?i=e._:this.allowMissing?i=t:(this.warn('Missing translation for key: "'+t+'"'),s=t),"string"==typeof i&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),s=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(s=a(i,this.currentLocale,e.smart_count),e)),s},t.prototype.has=function(t){return t in this.phrases};var l="||||",u={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return 1<t?1:0},russian:function(t){return t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},czech:function(t){return 1===t?0:2<=t&&t<=4?1:2},polish:function(t){return 1===t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},d={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t},"function"==typeof define&&define.amd?define([],function(){return a(s)}):"object"==(void 0===i?"undefined":n(i))?e.exports=a(s):s.Polyglot=a(s),cc._RF.pop()},{}],zh:[function(t,e,i){"use strict";cc._RF.push(e,"cff40bc3v9Mm4hB00bfJmif","zh"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh={label_text:{start:"开    始",restart:"重新开始",game_over:"游戏\n结束",tip1:"点击开始",tip2:"当两个方框重合的时候\n点按屏幕来获得分数！",tip3:"方框重合时点按屏幕",tip4:"此时两个方框重合\n点击来获得分数吧",highest_score:"最高分: ",forward:"转   发",back:"返   回",watch_ad:"看广告来复活",ranking_list:"排行榜"}},cc._RF.pop()},{}]},{},["LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min","en","zh","AnimRect","CountDown","GameManager","MenuManager","PlayerRect","RankManager","TargetRect"]);